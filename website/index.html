<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Community Finding in Phylogenetic Networks</title>

    <script src="https://d3js.org/d3.v4.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/cytoscape/3.2.22/cytoscape.js"></script> <!-- Using Content Delivery Network (CDN). -->
    <script src="https://unpkg.com/infinite-scroll@3/dist/infinite-scroll.pkgd.js"></script>
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>

    <link href='d3v4-selectable-zoomable-force-directed-graph.css'>
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">

    <script src="d3_svg.js"></script>
    <script src="d3_canvas.js"></script>
    <script src="cytoscape.js"></script>

    <style>

        text {
            font-family: sans-serif;
            font-size: 10px;
        }

        circle {
            stroke: #fff;
            stroke-width: 1.5px;
        }

        line {
            stroke: #999;
            stroke-opacity: 0.6;
        }

        .dropbtn, #reset_btn, #comm_detect, #file, #gamma, .container{
            background-color: black;
            color: white;
            padding: 10px;
            font-size: 14px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
        }

        .dropdown {
            position: relative;
            display: inline-block;
            height: 20px;
        }

        .dropdown-content {
            display: none;
            position: absolute;
            background-color: #ffffff;
            min-width: 160px;
            box-shadow: 0 8px 16px 0 rgba(0,0,0,0.2);
            z-index: 1;
        }

        .dropdown-content a {
            color: black;
            padding: 12px 16px;
            text-decoration: none;
            display: block;
        }

        .dropdown-content a:hover {background-color: black; color: white;}

        .dropdown:hover .dropdown-content {display: block;}

        .dropdown:hover .dropbtn {background-color: black;}

        footer {
            display: block;
            color:#ffffff;
            background-color: #000000;
            text-align: center;
        }

        .container2 p{
            float: left;
            width: 50%;
            margin-left: 25%;
        }

        #socialMedia{
            display:block;
            float:right;
            margin-top:0.75%;
            margin-right: 25px;
            width: 150px;
        }

        .container2 {
            width:100%;
            overflow:hidden;
            border-style: solid;
            border-color: black;
            text-align: center;

        }

        body {
            font-family: Helvetica;
        }

        /* Customize the label (the container) */
        .container {
            position: relative;
            padding-left: 35px;
        }

        /* Hide the browser's default checkbox */
        .container input {
            position: absolute;
            opacity: 0;
            cursor: pointer;
            height: 0;
            width: 0;
        }

        /* Create a custom checkbox */
        .checkmark {
            position: absolute;
            top: 0;
            left: 0;
            height: 25px;
            width: 25px;
            background-color: #eee;
            border-radius: 5px;
        }

        /* On mouse-over, add a grey background color */
        .container:hover input ~ .checkmark {
            background-color: #ccc;
        }

        /* When the checkbox is checked, add a blue background */
        .container input:checked ~ .checkmark {
            background-color: black;
        }

        /* Create the checkmark/indicator (hidden when not checked) */
        .checkmark:after {
            content: "";
            position: absolute;
            display: none;
        }

        /* Show the checkmark when checked */
        .container input:checked ~ .checkmark:after {
            display: block;
        }

        /* Style the checkmark/indicator */
        .container .checkmark:after {
            left: 9px;
            top: 5px;
            width: 5px;
            height: 10px;
            border: solid white;
            border-width: 0 3px 3px 0;
            -webkit-transform: rotate(45deg);
            -ms-transform: rotate(45deg);
            transform: rotate(45deg);
        }

    </style>
</head>

<body style="margin: auto; position: relative">

<header>

    <div style="border-style: dashed; border-color: transparent; width: 100%; margin: auto;">
        <div style="border-style: dashed; border-color: transparent; float: left; margin-top: 2%; margin-left: 12.5%">
            <a href="https://ist.pt" target="_blank" rel="noopener noreferrer">
                <img src="./img/ul.png" width="150" alt="UL">
            </a>
        </div>

        <div style="border-style: dashed; border-color: transparent; float: left;margin-top: 1.5%; margin-left: 12.5%">
            <a href="https://ist.pt" target="_blank" rel="noopener noreferrer">
                <img src="./img/ist.jpg" width="130" alt="IST">
            </a>
        </div>

        <div style="border-style: dashed; border-color: transparent; float: right; margin-top: 1.8%; margin-right: 12.5%">
            <a href="https://imm.medicina.ulisboa.pt/pt/" target="_blank" rel="noopener noreferrer">
                <img src="./img/imm.png" width="130" alt="iMM">
            </a>
        </div>

        <div style="border-style: dashed; border-color: transparent; float: right;margin-top: 1.5%; margin-right: 12.5%">
            <a href="https://ist.pt" target="_blank" rel="noopener noreferrer">
                <img src="./img/fmul.png" width="130" alt="FMUL">
            </a>
        </div>

    </div>

    <p style="margin-top: 7%; text-align: center; font-size: 45px;">Community Finding in Phylogenetic Networks</p>

</header>

<div style="position: fixed; right: 0; top: 200px; width: 200px; height: 200px; background-color: black; opacity: 0.8; border-bottom-left-radius: 15px; border-top-left-radius: 15px; z-index: 1">
    <div style="color: white; position: absolute; top: 5px; right: 15px;font-size: 25px; cursor: pointer" onclick="this.parentElement.style.display = 'none'">x</div>
    <h2 style="color: white; text-align: center; font-size: 22px;">Guide</h2>
    <ol style="color: white; line-height: 30px; font-size: 14px">
        <li>Upload File (<a href="https://github.com/warcraft12321/Thesis/blob/master/uploads/Input.txt" style="color: #1d68ca; text-decoration: none" target="_blank" rel="noopener noreferrer">Format</a>)</li>
        <li>Choose View</li>
        <li>Select Algorithm</li>
        <li>Run</li>
    </ol>
</div>


<div id="main" style="border-style: solid; width: 45%; float: right; margin-right: 75px;">

    <h2 style="text-align: center; font-size: 30px" >Implementation</h2>

    <div id = "graphDiv" style="width: 600px; height: 600px; border-style: solid; display: block; margin: auto; margin-top: 25px; text-align: center">

    </div>

    <div id="content_wrapper" style=" width:100%; margin: auto; margin-top: 50px; border-style: solid; border-color: black; position: relative; text-align: center">
        <input type="button" value="Reset" id='reset_btn'/>
        <input type="button" value="Run" id='comm_detect'/>
        <div class="dropdown" id = "dropdown">
            <button id = dropbtn class="dropbtn" style="width: 90px; text-align: center">Algorithm</button>
            <div id = "dropdown-content" class="dropdown-content">
                <a id = "louvain" onclick="rename(this.id)" style="cursor: pointer">Louvain</a>
                <a id = "infomap" onclick="rename(this.id)" style="cursor: pointer">Infomap</a>
                <a id = "llp" onclick="rename(this.id)" style="cursor: pointer">Layered Label Propagation</a>
            </div>
        </div>

        <div class="dropdown" id = "gamma" style="display: none;">
            <div id = "range_label" style="display: inline-block">Resolution:</div> <input type="range" id = "gamma2" name="points" min="0" max="100" onmouseup="rename_aux()">
        </div>

        <div class="dropdown">
            <button id = dropbtn_interface class="dropbtn" style="width: 115px; text-align: center">Interface</button>
            <div id = "dropdown-content_interface" class="dropdown-content">
                <a id = "svg" onclick="rename(this.id)" style="cursor: pointer">D3.js (SVG)</a>
                <a id = "canvas" onclick="rename(this.id)" style="cursor: pointer">D3.js (Canvas)</a>
                <a id = "cytoscape" onclick="rename(this.id)" style="cursor: pointer">Cytoscape</a>
            </div>
        </div>

        <form class="dropdown" action="/upload" enctype="multipart/form-data" method="post" id = "file" style="width: auto; position: relative; bottom: 0; margin-bottom: 0">
            <input class = "uploads" type="file" name="upload" accept=".txt" id = "img2" style="display: none;" onchange="makeSubmit();">
            <label for="img2"><img src="img/trans.png" style="width: 20px; cursor: pointer;"></label>
        </form>

        <label class="container" style="color: white; height: 100%">GN Benchmark
            <input id = "myCheck" type="checkbox" onchange="rename_aux2();">
            <span class="checkmark"></span>
        </label>

    </div>

</div>

<div style="float: left; border-style: solid; width: 44%; margin-left: 75px;">
    <h2 style="text-align: center; font-size: 30px">Abstract</h2>
    <p style="margin-left: 20px; margin-right: 20px; line-height: 30px; float: left">
        The aim of the <a href="pages/thesis.html" style="color: #1d68ca; text-decoration-line: none">thesis</a> was to develop an improved version of PHYLOViZ Online by implementing community
        finding algorithms, as well as, adding new tools for data visualization. Similar algorithms are being used
        in other domains. In phylogenetics, it is a step forward for handling infectious diseases.
        This tool is intended to assist distinct health professionals, including doctors and bioinformaticians, and is
        designed to enable medical and research purposes.
    </p>
</div>

<div style="float: left; border-style: solid; width: 44%; margin-top: 20px; margin-left: 75px; height: 495px;overflow: scroll;">

    <h2 style="text-align: center; font-size: 30px">Algorithms</h2>

    <h2 style="text-align: left; color: gray; margin-left: 20px;">Infomap</h2>

    <p style="margin-left: 20px; line-height: 30px; margin-right: 20px;text-align: justify">
        Infomap optimizes the map equation, which exploits the information-theoretic duality between the problem of
        compressing data, and the problem of detecting and extracting significant patterns or structures within those data.
    </p>

    <h2 style="text-align: left; color: gray; margin-left: 20px;">Layered Label Propagation</h2>

    <p style="margin-left: 20px; line-height: 30px;margin-right: 20px;text-align: justify">
        Label Propagation is a semi-supervised machine learning algorithm that assigns labels to previously unlabeled
        data points. At the start of the algorithm, a (generally small) subset of the data points have labels (or
        classifications). These labels are propagated to the unlabeled points throughout the course of the algorithm.
    </p>

    <h2 style="text-align: left; color: gray; margin-left: 20px;">Louvain</h2>

    <p style="margin-left: 20px; line-height: 30px;margin-right: 20px;text-align: justify">The Louvain Method for community detection
        is a method to extract communities from large networks created
        by Blondel et al. from the University of Louvain (affiliation of authors has given the method its name). The
        method is a greedy optimization method that appears to run in time O(nlog(n)).</p>
    <mml:math xmlns:mml="http://www.w3.org/1998/Math/MathML"><mml:mo>∆</mml:mo><mml:mi>M</mml:mi><mml:mo>=</mml:mo><mml:mfenced open="[" close="]" separators="|"><mml:mrow><mml:mfrac><mml:mrow><mml:msub><mml:mrow><mml:mi mathvariant="normal">Σ</mml:mi></mml:mrow><mml:mrow><mml:mi>i</mml:mi><mml:mi>n</mml:mi></mml:mrow></mml:msub><mml:mo>+</mml:mo><mml:mn>2</mml:mn><mml:msub><mml:mrow><mml:mi>k</mml:mi></mml:mrow><mml:mrow><mml:mi>i</mml:mi><mml:mo>,</mml:mo><mml:mi>i</mml:mi><mml:mi>n</mml:mi></mml:mrow></mml:msub></mml:mrow><mml:mrow><mml:mn>2</mml:mn><mml:mi>W</mml:mi></mml:mrow></mml:mfrac><mml:mo>-</mml:mo><mml:msup><mml:mrow><mml:mfenced separators="|"><mml:mrow><mml:mfrac><mml:mrow><mml:msub><mml:mrow><mml:mi mathvariant="normal">Σ</mml:mi></mml:mrow><mml:mrow><mml:mi>t</mml:mi><mml:mi>o</mml:mi><mml:mi>t</mml:mi></mml:mrow></mml:msub><mml:mo>+</mml:mo><mml:mn>2</mml:mn><mml:msub><mml:mrow><mml:mi>k</mml:mi></mml:mrow><mml:mrow><mml:mi>i</mml:mi></mml:mrow></mml:msub></mml:mrow><mml:mrow><mml:mn>2</mml:mn><mml:mi>W</mml:mi></mml:mrow></mml:mfrac></mml:mrow></mml:mfenced></mml:mrow><mml:mrow><mml:mn>2</mml:mn></mml:mrow></mml:msup></mml:mrow></mml:mfenced><mml:mo>-</mml:mo><mml:mfenced open="[" close="]" separators="|"><mml:mrow><mml:mfrac><mml:mrow><mml:msub><mml:mrow><mml:mi mathvariant="normal">Σ</mml:mi></mml:mrow><mml:mrow><mml:mi>i</mml:mi><mml:mi>n</mml:mi></mml:mrow></mml:msub></mml:mrow><mml:mrow><mml:mn>2</mml:mn><mml:mi>W</mml:mi></mml:mrow></mml:mfrac><mml:mo>-</mml:mo><mml:msup><mml:mrow><mml:mfenced separators="|"><mml:mrow><mml:mfrac><mml:mrow><mml:msub><mml:mrow><mml:mi mathvariant="normal">Σ</mml:mi></mml:mrow><mml:mrow><mml:mi>t</mml:mi><mml:mi>o</mml:mi><mml:mi>t</mml:mi></mml:mrow></mml:msub></mml:mrow><mml:mrow><mml:mn>2</mml:mn><mml:mi>W</mml:mi></mml:mrow></mml:mfrac></mml:mrow></mml:mfenced></mml:mrow><mml:mrow><mml:mn>2</mml:mn></mml:mrow></mml:msup><mml:mo>-</mml:mo><mml:msup><mml:mrow><mml:mfenced separators="|"><mml:mrow><mml:mfrac><mml:mrow><mml:msub><mml:mrow><mml:mi>k</mml:mi></mml:mrow><mml:mrow><mml:mi>i</mml:mi></mml:mrow></mml:msub></mml:mrow><mml:mrow><mml:mn>2</mml:mn><mml:mi>W</mml:mi></mml:mrow></mml:mfrac></mml:mrow></mml:mfenced></mml:mrow><mml:mrow><mml:mn>2</mml:mn></mml:mrow></mml:msup></mml:mrow></mml:mfenced></mml:math>
</div>



<div data-aos="fade-up" data-aos-anchor-placement="center-bottom" style="display: block; width: 90%; height: 550px; border-style: solid; float: left; margin-right: 50px; margin-left: 75px; margin-top: 20px;">
    <h2 style="text-align: center; font-size: 30px">Results</h2>
    <div style="margin: auto; text-align: center;">
        <div style="width: 50px; height: 5px; background-color: grey; cursor: pointer; border-radius: 5px; margin: auto; display: inline-block"></div>
        <div style="width: 50px; height: 5px; background-color: grey; cursor: pointer; border-radius: 5px; margin: auto; display: inline-block"></div>
        <div style="width: 50px; height: 5px; background-color: grey; cursor: pointer; border-radius: 5px; margin: auto; display: inline-block"></div>

    </div>


    <svg width='600' height='350'></svg>
    <div id='tooltip' style='position:absolute; border-style: solid; padding:5px;'></div>

    <div style="float: right; width: 500px; margin-right: 150px; margin-top: 150px; line-height: 30px">The optimal gamma parameter, in Layered Label Propagation algorithm, varies widely accordingly to network properties. Girvan-Newman benchmark network was used with different mixing parameters.</div>

</div>

<div data-aos="fade-up" data-aos-anchor-placement="center-bottom" class = "post" style="display: block; width: 90%; border-style: solid; float: left; margin-right: 50px; margin-left: 75px; margin-top: 20px;">
    <h2 style="text-align: center; font-size: 30px">Web Tools</h2>
    <div style="margin: auto;">
        <figure style="float: left; margin-left: 5%">
            <a href="https://online.phyloviz.net/index" target="_blank" rel="noopener noreferrer">
                <img src="./img/phyloviz.png" width="200px" alt="PHYLOViZ">
            </a>
        </figure>
        <div style="float: left; width: 300px; line-height: 30px">

            <a href="https://online.phyloviz.net/index" target="_blank" rel="noopener noreferrer" style="text-decoration-line: none">
                <h2 style="color: grey;">PHYLOViZ Online</h2>
            </a>
            <p style="text-align: justify"> This is an online version of the software PHYLOViZ, a software that allows
                the analysis of sequence-based typing methods that generate allelic profiles and their associated
                epidemiological data. The main purpose was to give an user-friendly solution for data analysis and sharing
                without installing any specific software. </p>

        </div>

        <div style="float: right; width: 300px; line-height: 30px; margin-right: 5%" >

            <a href="https://insaflu.insa.pt/" target="_blank" rel="noopener noreferrer" style="text-decoration-line: none">
                <h2 style="color: grey;">INSaFLU</h2>
            </a>
            <p style="text-align: justify"> It is a bioinformatics free web-based suite that deals with primary data
                (reads) towards the automatic generation of the output data that are actually the core first-line
                “genetic requests” for effective and timely influenza laboratory surveillance (e.g., type and sub-type
                gene and whole-genome consensus sequences, variants annotation, alignments and phylogenetic trees). Data
                integration is continuously scalable, fitting the need for a real-time epidemiological surveillance
                during the flu epidemics. </p>

        </div>

        <figure style="float: right; margin-right: 3%">
            <a href="https://insaflu.insa.pt/" target="_blank" rel="noopener noreferrer">
                <img src="./img/logo_insaflu_new.png" width="300px" alt="INSaFLU">
            </a>
        </figure>

    </div>
</div>

<div data-aos="fade-up" data-aos-anchor-placement="center-bottom" class = "post" style="display: block; width: 90%; border-style: solid; float: left; margin-left: 75px; margin-top: 20px; margin-bottom: 20px;">
    <h2 style="text-align: center; font-size: 30px">EIT Health</h2>
    <div style="margin: auto;">
        <figure style="float: left;">
            <a href="pages/mtih.html">
                <img src="./img/mtih.jpg" width="300px" alt="MTiH">
            </a>
        </figure>
        <div style="float: left; width: 300px; line-height: 30px">

            <a href="pages/mtih.html" style="text-decoration-line: none">
                <h2 style="color: grey;">1st Workshop MTiH (Madrid, Spain)</h2>
            </a>
            <p style="text-align: justify"> As a Master of Technological Innovation in Health student, I was invited to present a poster
                about my Master Thesis and to
                talk about my past academic achievements. During my speech, I was still able to suggest new ways of
                improving this European program, powered by EIT Health (a body of the EU). </p>

        </div>

        <div style="float: right; width: 300px; line-height: 30px; margin-right: 5%">

            <a href="./pages/amr.html" style="text-decoration-line: none">
                <h2 style="color: grey;">AMR Hackathon 2018 (Heidelberg, Germany)</h2>
            </a>
            <p style="text-align: justify"> I was selected to participate in a 3-day Antimicrobial Resistance Hackathon organized by EIT Health Germany. At
                the beginning, we were divided in teams of 6/7 elements that would proceed to an AMR
                analysis of a different EU country. </p>
        </div>

        <figure style="float: right; margin-right: 3%">
            <a href="./pages/amr.html">
                <img src="./img/amr.png" width="310px" alt="AMR Hackathon">
            </a>
        </figure>

    </div>
</div>

<div class="container2" style="background-color: black; height: 50px; margin: auto">
    <p style="color: white;">Luís Rita</p>
    <div id = "socialMedia">
        <a href = "https://github.com/warcraft12321" target="_blank" rel="noopener noreferrer">
            <img src = "./img/MediaIcons/github.png" width="25" style="margin-right: 5%" alt="GitHub">
        </a>
        <a href = "https://www.linkedin.com/in/lu%C3%ADs-rita-750302122/" target="_blank" rel="noopener noreferrer">
            <img src = "./img/MediaIcons/linkedin.png" width="25" style="margin-right: 5%" alt="LinkedIn">
        </a>
        <a href = "mailto:luis20dr@gmail.com">
            <img src = "./img/MediaIcons/gmail.png" width="25" style="margin-right: 5%" alt="Gmail">
        </a>
    </div>
</div>

</body>

<script>

    // Define margins, dimensions, and some line colors
    const margin = {top: 40, right: 120, bottom: 30, left: 150};
    const width = 600 - margin.left - margin.right;
    const height = 350 - margin.top - margin.bottom;

    // Define the scales and tell D3 how to draw the line
    const x = d3.scaleLinear().domain([0, 1]).range([0, width]);
    const y = d3.scaleLinear().domain([0, 1]).range([height, 0]);
    const line = d3.line().x(d => x(d.year)).y(d => y(d.population));

    const chart = d3.select('svg').append('g')
        .attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');

    const tooltip = d3.select('#tooltip');
    const tooltipLine = chart.append('line');

    // Add the axes and a title
    const xAxis = d3.axisBottom(x).tickFormat(d3.format('.4'));
    const yAxis = d3.axisLeft(y).tickFormat(d3.format('.2s'));
    chart.append('g').call(yAxis);
    chart.append('g').attr('transform', 'translate(0,' + height + ')').call(xAxis);
    chart.append('text').html('Gamma Choice').attr('x', 200);

    // Load the data and draw a chart
    let states, tipBox;
    d3.json('nmi_gamma.json', d => {
        states = d;

        chart.selectAll()
            .data(states).enter()
            .append('path')
            .attr('fill', 'none')
            .attr('stroke', d => d.color)
            .attr('stroke-width', 2)
            .datum(d => d.history)
            .attr('d', line);

        chart.selectAll()
            .data(states).enter()
            .append('text')
            .html(d => d.name)
            .attr('fill', d => d.color)
            .attr('alignment-baseline', 'middle')
            .attr('x', width)
            .attr('dx', '.5em')
            .attr('y', d => y(d.currentPopulation));

        tipBox = chart.append('rect')
            .attr('width', width)
            .attr('height', height)
            .attr('opacity', 0)
            .on('mousemove', drawTooltip)
            .on('mouseout', removeTooltip);
    })

    function removeTooltip() {
        if (tooltip) tooltip.style('display', 'none');
        if (tooltipLine) tooltipLine.attr('stroke', 'none');
    }

    function drawTooltip() {
        const year = Math.floor((x.invert(d3.mouse(tipBox.node())[0]) + 5) / 10) * 10;

        states.sort((a, b) => {
            return b.history.find(h => h.year === year).population - a.history.find(h => h.year === year).population;
        })

        tooltipLine.attr('stroke', 'black')
            .attr('x1', x(year))
            .attr('x2', x(year))
            .attr('y1', 0)
            .attr('y2', height);

        tooltip.html(year)
            .style('display', 'block')
            .style('left', d3.event.pageX + 20)
            .style('top', d3.event.pageY - 20)
            .selectAll()
            .data(states).enter()
            .append('div')
            .style('color', d => d.color)
            .html(d => d.name + ': ' + d.history.find(h => h.year === year).population);
    }

</script>

<script>

    AOS.init();

    AOS.init({
        // Global settings:
        disable: false, // accepts following values: 'phone', 'tablet', 'mobile', boolean, expression or function
        startEvent: 'DOMContentLoaded', // name of the event dispatched on the document, that AOS should initialize on
        initClassName: 'aos-init', // class applied after initialization
        animatedClassName: 'aos-animate', // class applied on animation
        useClassNames: false, // if true, will add content of `data-aos` as classes on scroll
        disableMutationObserver: false, // disables automatic mutations' detections (advanced)
        debounceDelay: 50, // the delay on debounce used while resizing window (advanced)
        throttleDelay: 99, // the delay on throttle used while scrolling the page (advanced)


        // Settings that can be overridden on per-element basis, by `data-aos-*` attributes:
        offset: 120, // offset (in px) from the original trigger point
        delay: 0, // values from 0 to 3000, with step 50ms
        duration: 400, // values from 0 to 3000, with step 50ms
        easing: 'ease', // default easing for AOS animations
        once: true, // whether animation should happen only once - while scrolling down
        mirror: false, // whether elements should animate out while scrolling past them
        anchorPlacement: 'top-bottom', // defines which position of the element regarding to window should trigger the animation

    });

    let canvas, svg, cy;

    function makeSubmit () {
        document.getElementById("file").submit();

        rename(document.getElementById("dropbtn_interface").innerText);

    }

    function rename_aux () {
        switch (document.getElementById("dropbtn").innerText) {

            case "Louvain":

                rename("louvain");

                break;

            case "Infomap":

                rename("infomap");

                break;

            case "LLP":

                rename("llp");

        }

    }

    function rename_aux2 () {

        switch (document.getElementById("dropbtn_interface").innerText) {

            case "D3.js (SVG)":

                rename("svg");

                break;

            case "D3.js (Canvas)":

                rename("canvas");

                break;

            case "Cytoscape":

                rename("cytoscape");

        }

        if(document.getElementById("file").style.display === "none") {

            document.getElementById("file").style.display = "inline-block";
            document.getElementById("gamma").style.display = "none";
            document.getElementById("dropbtn").innerText = "Algorithm";

        } else {

            document.getElementById("file").style.display = "none";


        }

    }

    rename('svg');

    function rename(id) {

        let checked = document.getElementById("myCheck").checked;
        let fetchy;

        switch(id) {

            case "louvain":

                if (checked) {
                    fetchy = "Girvan";
                } else {
                    fetchy = "undefined";
                }

                document.getElementById("dropbtn").innerText = "Louvain";
                document.getElementById("gamma").style.display = "inline-block";
                document.getElementById("range_label").innerText = "Max. Var:";
                fetch("algorithm/" + id + "/gamma/" + 0.0000001 + "/cytoscape/" + (document.getElementById("dropbtn_interface").innerText==="Cytoscape") + "/fetchy/" + fetchy);
                break;

            case "infomap":

                if (checked) {
                    fetchy = "Girvan";
                } else {
                    fetchy = "undefined";
                }

                document.getElementById("dropbtn").innerText = "Infomap";
                document.getElementById("gamma").style.display = "inline-block";
                document.getElementById("range_label").innerText = "Max. Var:";
                fetch("algorithm/" + id + "/gamma/" + (document.getElementById("gamma2").value+1)/10000000000 + "/cytoscape/" + (document.getElementById("dropbtn_interface").innerText==="Cytoscape") + "/fetchy/" + fetchy);
                break;

            case "llp":

                if (checked) {
                    fetchy = "Girvan";
                } else {
                    fetchy = "undefined";
                }

                document.getElementById("dropbtn").innerText = "LLP";
                document.getElementById("range_label").innerText = "Resolution:";
                document.getElementById("gamma").style.display = "inline-block";
                    fetch("algorithm/" + id + "/gamma/" + (document.getElementById("gamma2").value) / (document.getElementById("gamma2").max) + "/cytoscape/" + (document.getElementById("dropbtn_interface").innerText === "Cytoscape") + "/fetchy/" + fetchy);
                break;

            case 'svg':
                document.getElementById("dropbtn_interface").innerText = "D3.js (SVG)";

                d3.select('canvas').remove();
                if(typeof cy !== 'undefined') cy.destroy();

                canvas = d3.select('#graphDiv').append('svg');
                svg = d3.select('#graphDiv');

                if (checked) {
                    fetchy = "Girvan";
                } else {
                    fetchy = "undefined";
                }

                fetch("reset/" + fetchy).then(function(res) {

                    return res.json();

                }).then(function(jsonData) {

                    d3svgFunc(svg, jsonData);

                });

                break;

            case 'canvas':
                document.getElementById("dropbtn_interface").innerText = "D3.js (Canvas)";

                d3.select('svg').remove();
                d3.select('canvas').remove();
                if(typeof cy !== 'undefined') cy.destroy();

                canvas = d3.select('#graphDiv').append('canvas')
                    .attr('width', 600 + 'px')
                    .attr('height', 600 + 'px').node();

                // Now send a request to your Node program
                if (checked) {
                    fetchy = "Girvan";
                } else {
                    fetchy = "undefined";
                }

                fetch("reset/" + fetchy).then(function(res) {

                    return res.json();

                }).then(function(jsonData) {

                    d3canvasFunc(jsonData);
                });

                break;

            case 'cytoscape':
                document.getElementById("dropbtn_interface").innerText = "Cytoscape";

                d3.select('svg').remove();
                d3.select('canvas').remove();
                if(typeof cy !== 'undefined') cy.destroy();

                // Now send a request to your Node program

                if (checked) {
                    fetchy = "Girvan_Cytoscape";
                } else {
                    fetchy = "Cytoscape";
                }

                fetch("reset/" + fetchy).then(function(res) {

                    return res.json();

                }).then(function(jsonData) {

                    cytoscapeFunc(jsonData);
                });

        }
    }

    // Action on clicking in the Run button.
    d3.select('#comm_detect').on('click', function(){

        if (document.getElementById("dropbtn").innerText !== "Algorithm") {

            let view = document.getElementById("dropbtn_interface").innerText;

            fetch("run/" + view).then(function (res) {
                // Res will be a Response object.
                // Use res.text() or res.json() to get the information that the Node program sent.

                return res.json();

            }).then(function (jsonData) {

                switch (view) {

                    case "D3.js (SVG)":

                        console.log(jsonData);
                        d3svgFunc(svg, jsonData);

                        break;

                    case "D3.js (Canvas)":

                        d3canvasFunc(jsonData);

                        break;

                    case "Cytoscape":

                        cytoscapeFunc(jsonData);

                }

            });

        }

    });

    // Action on clicking in the Reset button. All nodes have their colours reset to a standard one.
    d3.select('#reset_btn').on('click', function() {

        document.getElementById("dropbtn").innerText = "Algorithm";
        document.getElementById("gamma").style.display = "none";
        document.getElementById("myCheck").checked = false;

        rename_aux2();

        document.getElementById("file").style.display = "inline-block";

    });

</script>

</html>